<ng-container
  *ngIf="configData?.tracking == 'NoTracking' || configData?.trackingType == 'NoTracking'"
>
  <lib-popup-page
    title="{{ 'tracking.Expiry' | translate }}"
    [closeFunction]="onCancel"
    (Submit)="onSubmit()"
  >
    <div class="parentStock">
      <p-table
        [value]="tracking['controls']"
        dataKey="id"
        styleClass="p-datatable-gridlines p-datatable-striped"
        [tableStyle]="{ 'min-width': '50rem' }"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'tracking.expiryDate' | translate }}</th>
            <th>{{ 'tracking.generatedBatch' | translate }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-trackingFormGroup let-editing="editing" let-i="rowIndex">
          <tr [formGroup]="trackingFormGroup">
            <td
              [pEditableColumn]="trackingFormGroup.controls['expireDate']"
              pEditableColumnField="expireDate"
            >
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <lib-calendar formControlName="expireDate"></lib-calendar>
                </ng-template>
                <ng-template pTemplate="output">
                  {{ trackingFormGroup.controls['expireDate']?.value | date : 'dd-MM-yyyy' }}
                </ng-template>
              </p-cellEditor>
              <lib-field-validations
                [appControl]="trackingFormGroup.controls['expireDate']"
              ></lib-field-validations>
            </td>
            <!--  -->
            <td>
              {{ trackingFormGroup.controls['systemPatchNo']?.value }}
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </lib-popup-page>
</ng-container>
<!--  -->
<ng-container *ngIf="configData?.tracking == 'Batch' || configData?.trackingType == 'Batch'">
  <lib-popup-page
    title="{{ 'tracking.vendorBatchNo' | translate }}"
    [closeFunction]="onCancel"
    (Submit)="onSubmit()"
  >
    <div class="parentStock">
      <p-table
        [value]="tracking['controls']"
        dataKey="id"
        styleClass="p-datatable-gridlines p-datatable-striped"
        [tableStyle]="{ 'min-width': '50rem' }"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'tracking.vendorBatchNo' | translate }}</th>
            <th>{{ 'tracking.expiryDate' | translate }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-trackingFormGroup let-editing="editing" let-i="rowIndex">
          <tr [formGroup]="trackingFormGroup">
            <td
              [pEditableColumn]="trackingFormGroup.controls['vendorBatchNo']"
              pEditableColumnField="vendorBatchNo"
            >
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <lib-text-input
                    placeholder="{{ 'tracking.vendorBatchNo' | translate }}"
                    formControlName="vendorBatchNo"
                  ></lib-text-input>
                </ng-template>
                <ng-template pTemplate="output">
                  {{ trackingFormGroup.controls['vendorBatchNo']?.value }}
                </ng-template>
              </p-cellEditor>
              <lib-field-validations
                [appControl]="trackingFormGroup.controls['vendorBatchNo']"
              ></lib-field-validations>
            </td>
            <!--  -->

            <td
              [pEditableColumn]="trackingFormGroup.controls['expireDate']"
              pEditableColumnField="expireDate"
            >
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <lib-calendar formControlName="expireDate"></lib-calendar>
                </ng-template>
                <ng-template pTemplate="output">
                  {{ trackingFormGroup.controls['expireDate']?.value | date : 'dd-MM-yyyy' }}
                </ng-template>
              </p-cellEditor>
              <lib-field-validations
                [appControl]="trackingFormGroup.controls['expireDate']"
              ></lib-field-validations>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </lib-popup-page>
</ng-container>
<ng-container *ngIf="configData?.tracking == 'Serial' || configData?.trackingType == 'Serial'">
  <lib-popup-page
    title="{{ 'tracking.serial' | translate }}"
    [closeFunction]="onCancel"
    (Submit)="onSubmit()"
  >
    <div class="parentStock">
      <p-table
        [value]="tracking['controls']"
        dataKey="id"
        styleClass="p-datatable-gridlines p-datatable-striped"
        [tableStyle]="{ 'min-width': '50rem' }"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'tracking.serialId' | translate }}</th>
            <th>{{ 'tracking.expiryDate' | translate }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-trackingFormGroup let-editing="editing" let-i="rowIndex">
          <tr [formGroup]="trackingFormGroup">
            <td
              [pEditableColumn]="trackingFormGroup.controls['serialId']"
              pEditableColumnField="serialId"
            >
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <lib-text-input
                    placeholder="{{ 'tracking.serialId' | translate }}"
                    formControlName="serialId"
                  ></lib-text-input>
                </ng-template>
                <ng-template pTemplate="output">
                  {{ trackingFormGroup.controls['serialId']?.value }}
                </ng-template>
              </p-cellEditor>
              <lib-field-validations
                [appControl]="trackingFormGroup.controls['serialId']"
              ></lib-field-validations>
            </td>
            <!--  -->

            <td
              [pEditableColumn]="trackingFormGroup.controls['expireDate']"
              pEditableColumnField="expireDate"
            > 
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <lib-calendar formControlName="expireDate"></lib-calendar>
                </ng-template>
                <ng-template pTemplate="output">
                  {{ trackingFormGroup.controls['expireDate']?.value | date : 'dd-MM-yyyy' }}
                </ng-template>
              </p-cellEditor>
              <lib-field-validations
                [appControl]="trackingFormGroup.controls['expireDate']"
              ></lib-field-validations>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </lib-popup-page>
</ng-container>
